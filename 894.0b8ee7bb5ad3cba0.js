"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[894],{6513:(B,d,n)=>{n.r(d),n.d(d,{default:()=>R});var i=n(9842),W=n(9377),p=n(2881),e=n(1360),g=n(467),P=n(1985),F=n(983),w=n(7786),m=n(3726),h=n(8141),T=n(6977),k=n(1413),x=n(6697);class l extends P.c{constructor(r,o){let t,a;try{t=new Worker(r,o)}catch(c){a=c}super(c=>{let y=F.w;a?c.error(a):this.destroy$.isStopped?c.complete():t&&(y=(0,w.h)((0,m.R)(t,"message").pipe((0,h.M)(f=>c.next(f))),(0,m.R)(t,"error").pipe((0,h.M)(f=>c.error(f)))).pipe((0,T.Q)(this.destroy$))),y.subscribe().add(c)}),(0,i.A)(this,"worker",void 0),(0,i.A)(this,"url",void 0),(0,i.A)(this,"destroy$",void 0),this.worker=t,this.url=r,this.destroy$=new k.B}static fromFunction(r,o){return new l(l.createFnUrl(r),o)}static execute(r,o){return(0,g.A)(function*(){const t=l.fromFunction(r),a=t.pipe((0,x.s)(1)).toPromise();return t.postMessage(o),a.then(c=>(t.terminate(),c))})()}static createFnUrl(r){const t=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${r});`],{type:"text/javascript"});return URL.createObjectURL(t)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(r){this.worker&&this.worker.postMessage(r)}}var u=n(6354),M=n(5084),j=n(7049),E=n(1584);let C=(()=>{var s;class r{constructor(){(0,i.A)(this,"date$",(0,E.O)(0,1e3).pipe((0,u.T)(()=>Date.now())))}}return s=r,(0,i.A)(r,"\u0275fac",function(t){return new(t||s)}),(0,i.A)(r,"\u0275cmp",e.VBU({type:s,selectors:[["app-clock"]],decls:3,vars:6,template:function(t,a){1&t&&(e.EFF(0),e.nI1(1,"async"),e.nI1(2,"date")),2&t&&e.SpI(" ",e.i5U(2,3,e.bMT(1,1,a.date$),"mediumTime")," ")},dependencies:[p.MD,p.Jj,p.vh],encapsulation:2,changeDetection:0})),r})();function D(s,r){if(1&s){const o=e.RV6();e.nrm(0,"app-clock"),e.j41(1,"div",0)(2,"button",1),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.workerThread.postMessage())}),e.EFF(3," Run in worker process "),e.k0s(),e.j41(4,"p"),e.EFF(5),e.nI1(6,"async"),e.k0s(),e.j41(7,"tui-notification",2),e.EFF(8,"This would be calculated in several seconds in a background thread"),e.k0s()(),e.j41(9,"div",0)(10,"button",1),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.emitter.next())}),e.EFF(11," Run in main process "),e.k0s(),e.j41(12,"p"),e.EFF(13),e.nI1(14,"async"),e.k0s(),e.j41(15,"tui-notification",2),e.EFF(16,"This would freeze your main thread for several seconds"),e.k0s()()}if(2&s){const o=e.XpG();e.R7$(5),e.SpI("Execution time: ",e.bMT(6,2,o.workerData$),""),e.R7$(8),e.SpI("Execution time: ",e.bMT(14,4,o.result$),"")}}function v(){const s=performance.now();return Array.from({length:16e3}).forEach((r,o)=>Array.from({length:o}).reduce(t=>t+1,0)),performance.now()-s}let R=(()=>{var s;class r{constructor(){(0,i.A)(this,"platformId",(0,e.WQX)(e.Agw)),(0,i.A)(this,"isBrowser",(0,W.UE)(this.platformId)),(0,i.A)(this,"workerThread",l.fromFunction(v)),(0,i.A)(this,"workerData$",this.workerThread.pipe(function $(){return(0,u.T)(({data:s})=>s)}())),(0,i.A)(this,"emitter",new k.B),(0,i.A)(this,"result$",this.emitter.pipe((0,u.T)(v)))}}return s=r,(0,i.A)(r,"\u0275fac",function(t){return new(t||s)}),(0,i.A)(r,"\u0275cmp",e.VBU({type:s,selectors:[["workers-page"]],decls:1,vars:1,consts:[[1,"example"],["appearance","secondary","tuiButton","","type","button",3,"click"],["size","m"]],template:function(t,a){1&t&&e.DNE(0,D,17,6),2&t&&e.vxM(a.isBrowser?0:-1)},dependencies:[C,p.MD,p.Jj,M.p,j.wS],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.example[_ngcontent-%COMP%]{min-inline-size:22.5rem;border-top:1px solid #dcdcdc;margin-block-start:1rem;padding-block-start:1rem}"],changeDetection:0})),r})()}}]);