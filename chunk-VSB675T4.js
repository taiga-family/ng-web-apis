import{b as A,c as O}from"./chunk-GUAY7ENF.js";import{a as T,b as q,c as R,e as D}from"./chunk-QTPVV5DI.js";import"./chunk-Y7XNAN3T.js";import"./chunk-PCT2X63S.js";import"./chunk-QAYQBKTV.js";import{l as I}from"./chunk-X37QOLRV.js";import{Ac as E,Bb as u,Bc as d,Dc as k,Kc as M,Sb as h,Ub as f,Vb as b,Wb as s,Xb as i,Yb as t,Zb as c,fb as _,fc as x,jb as o,jc as v,lc as C,wa as S,xa as w,zc as e}from"./chunk-KG2R5REB.js";import"./chunk-GAL4ENT6.js";var z=`<div
  waPayment
  [paymentTotal]="total"
>
  <div
    waPaymentItem
    [paymentLabel]="label"
    [paymentAmount]="amount"
  >
    {{label}} ({{amount}})
  </div>
  <button
    (waPaymentSubmit)="onPayment($event)"
    (waPaymentError)="onError($event)"
  >
    Buy
  </button>
</div>`;var B=`import {WaPaymentRequestService} from '@ng-web-apis/payment-request';

// ...

private readonly paymentRequest = inject(WaPaymentRequestService)

pay(details: PaymentDetailsInit) {
    this.paymentRequest.request(details).then(
        response => {
            response.complete();
        },
        error => {},
    );
}`;function F(r,a){if(r&1){let n=x();i(0,"div",7),v("click",function(){let y=S(n).$implicit,l=C();return w(l.addToShippingCard(y))}),c(1,"img",8),i(2,"label",9),e(3),t(),i(4,"p",10),e(5),t()()}if(r&2){let n=a.$implicit;o(),s("src",n.image,_),o(2),E(n.label),o(2),d("",n.price," \u20BD")}}function L(r,a){if(r&1&&(i(0,"div",4),e(1),t()),r&2){let n=a.$implicit;s("paymentAmount",n.amount)("paymentLabel",n.label),o(),k(" ",n.label," (",n.amount.value," ",n.amount.currency,") ")}}function N(r,a){r&1&&e(0," Nothing added ")}var p=class{constructor(a,n,m){this.image=a;this.label=n;this.price=m}get amount(){return{currency:"RUB",value:String(this.price)}}},g=class r{items=[new p("https://image.flaticon.com/icons/svg/1868/1868178.svg","Matryoshka",50),new p("https://image.flaticon.com/icons/svg/820/820158.svg","Balalaika",100),new p("https://image.flaticon.com/icons/svg/1868/1868169.svg","Ushanka",70),new p("https://image.flaticon.com/icons/svg/1868/1868226.svg","Kokoshnik",70),new p("https://image.flaticon.com/icons/svg/1868/1868276.svg","Borscht",10),new p("https://image.flaticon.com/icons/svg/1868/1868380.svg","Sputnik",1e3)];shippingCart=[];get totalSum(){return this.shippingCart.reduce((a,n)=>a+n.price,0)}get total(){return{label:"Total",amount:{currency:"RUB",value:String(this.totalSum)}}}addToShippingCard(a){this.shippingCart=[...this.shippingCart,a]}onPayment(a){console.info("payment response:",a),this.clearShippingCart(),a.complete()}onPaymentError(a){console.info("payment error:",a),this.clearShippingCart()}clearShippingCart(){this.shippingCart=[]}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=u({type:r,selectors:[["app-shop"]],decls:16,vars:4,consts:[[1,"items"],[1,"item"],["waPayment","",1,"shopping-cart",3,"paymentTotal"],[1,"sticky"],["waPaymentItem","",1,"shopping-card-item",3,"paymentAmount","paymentLabel"],[1,"total"],["type","button",1,"buy-button",3,"waPaymentError","waPaymentSubmit","disabled"],[1,"item",3,"click"],["alt","item","width","64",1,"item-image",3,"src"],[1,"item-label"],[1,"item-price"]],template:function(n,m){n&1&&(i(0,"div",0),f(1,F,6,3,"div",1,h),t(),i(3,"div",2)(4,"div",3)(5,"h4"),e(6,"Shopping Cart"),t(),f(7,L,2,5,"div",4,h,!1,N,1,0),i(10,"div",5)(11,"b"),e(12,"Total:"),t(),e(13),t(),i(14,"button",6),v("waPaymentError",function(l){return m.onPaymentError(l)})("waPaymentSubmit",function(l){return m.onPayment(l)}),e(15," Buy "),t()()()),n&2&&(o(),b(m.items),o(2),s("paymentTotal",m.total),o(4),b(m.shippingCart),o(6),d(" ",m.totalSum," \u20BD "),o(),s("disabled",m.shippingCart.length===0))},dependencies:[q,T,D],styles:["[_nghost-%COMP%]{display:flex}.items[_ngcontent-%COMP%]{display:flex;flex:2;flex-wrap:wrap}@media (max-width: 800px){.items[_ngcontent-%COMP%]{max-inline-size:50%;justify-content:flex-end}}.item[_ngcontent-%COMP%]{display:flex;inline-size:9.375rem;margin:.75rem;padding:1rem 1rem 0;flex-direction:column;align-items:center;border:1px solid #dcdcdc;border-radius:.5rem;cursor:pointer;transition:box-shadow .3s}.item[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}.item-label[_ngcontent-%COMP%]{cursor:inherit}.item-price[_ngcontent-%COMP%]{font-size:smaller}.item-image[_ngcontent-%COMP%]{margin-block-end:.75rem}.sticky[_ngcontent-%COMP%]{position:sticky;inset-block-start:1rem}.total[_ngcontent-%COMP%]{margin-block-start:1rem}.shopping-card-item[_ngcontent-%COMP%]{margin-block-start:.25rem;margin-block-end:.25rem}.shopping-cart[_ngcontent-%COMP%]{flex:1;max-inline-size:10.5rem;background-color:#f0f0f0;padding:0 1rem;border-radius:.5rem}.buy-button[_ngcontent-%COMP%]{inline-size:100%;margin-block-start:1.25rem;margin-block-end:.5rem;background-color:#fff;border:1px solid #ccc;border-radius:.25rem;padding:.25rem;cursor:pointer}.buy-button[_ngcontent-%COMP%]:disabled{cursor:default;opacity:.56}"],changeDetection:0})};var P=class r{samples={service:B,directives:z};static \u0275fac=function(n){return new(n||r)};static \u0275cmp=u({type:r,selectors:[["payment-request-page"]],features:[M([{provide:R,useValue:[{supportedMethods:"https://apple.com/apple-pay",data:{version:3,merchantIdentifier:"merchant.com.example",merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["amex","discover","masterCard","visa"],countryCode:"US"}},{supportedMethods:"basic-card"}]}])],decls:45,vars:3,consts:[[1,"wrapper"],["href","https://developer.mozilla.org/en-US/docs/Web/API/Payment_Request_API","rel","noreferrer","target","_blank"],[3,"highlight"],[1,"how-it-works"],[1,"how-it-works-text"],[1,"how-it-works-point"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#wapayment","rel","noreferrer","target","_blank"],["href","https://www.w3.org/TR/payment-request/#paymentitem-dictionary","rel","noreferrer","target","_blank"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#waPaymentItem","rel","noreferrer","target","_blank"],["href","https://developer.mozilla.org/en-US/docs/Web/API/PaymentResponse","rel","noreferrer","target","_blank"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#waPaymentSubmit","rel","noreferrer","target","_blank"],[1,"directive-sample"]],template:function(n,m){n&1&&(i(0,"div",0)(1,"p"),e(2," Angular does not have any abstractions over "),i(3,"a",1),e(4," PaymentRequest API "),t(),e(5," . This library provides you two ways to use this API with Angular of 6+ version. "),t(),i(6,"h3"),e(7,"As an Angular service:"),t(),i(8,"pre")(9,"code",2),e(10),t()(),i(11,"h3"),e(12,"As a set of directives:"),t(),i(13,"p"),e(14,"Click to add some items to a shopping cart:"),t(),c(15,"app-shop"),i(16,"h4"),e(17,"How it works:"),t(),i(18,"div",3)(19,"div",4)(20,"p",5)(21,"a",6),e(22," waPayment "),t(),e(23," directive defines a scope for a\xA0new payment and needs "),i(24,"a",7),e(25," PaymentItem "),t(),e(26," object with information about a label and a\xA0total sum of the payment "),t(),i(27,"p",5),e(28," Each item of the shipping cart is a\xA0 "),i(29,"a",8),e(30," waPaymentItem "),t(),e(31," directive. It\xA0is\xA0a\xA0declarative "),i(32,"a",7),e(33," PaymentItem "),t(),e(34," for your Payment "),t(),i(35,"p",5),e(36," Click on the button starts a\xA0PaymentRequest modal in your browser that returns "),i(37,"a",9),e(38," PaymentResponse "),t(),e(39," or an error. It works due a\xA0 "),i(40,"a",10),e(41," waPaymentSubmit "),t(),e(42," directive. "),t()(),i(43,"pre",11),c(44,"code",2),t()()()),n&2&&(o(9),s("highlight",m.samples.service),o(),d(`
    `,m.samples.service,`
`),o(34),s("highlight",m.samples.directives))},dependencies:[I,O,A,g],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.wrapper[_ngcontent-%COMP%]{padding:0 .625rem}.how-it-works[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap}.how-it-works-point[_ngcontent-%COMP%]{margin-block-start:1.625rem;margin-block-end:1.625rem}.how-it-works-text[_ngcontent-%COMP%]{flex:1;min-inline-size:18.75rem;margin:.5rem}.directive-sample[_ngcontent-%COMP%]{display:block;flex:1;margin:.5rem;inline-size:20.625rem}.directive-sample-arrow[_ngcontent-%COMP%]{position:absolute;inset-inline-end:5.9375rem;inset-block-start:-2.625rem}"],changeDetection:0})};export{P as default};
