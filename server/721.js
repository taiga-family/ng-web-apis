"use strict";exports.id=721,exports.ids=[721],exports.modules={8315:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{pJ:()=>PERMISSIONS_SUPPORT,Kn:()=>PermissionsService,GZ:()=>isDenied,kR:()=>isGranted});var core=__webpack_require__(27083),Observable=__webpack_require__(38041),Subscription=__webpack_require__(17988),from=__webpack_require__(69277),switchMap=__webpack_require__(25358),fromEvent=__webpack_require__(55014),startWith=__webpack_require__(64204),map=__webpack_require__(55514),shareReplay=__webpack_require__(85204),src=__webpack_require__(13270);const WA_PERMISSIONS=new core.nKC("[WA_PERMISSIONS]",{factory:()=>(0,core.WQX)(src.Rp).permissions}),PERMISSIONS=WA_PERMISSIONS,WA_PERMISSIONS_SUPPORT=new core.nKC("[WA_PERMISSIONS_SUPPORT]",{factory:()=>!!(0,core.WQX)(PERMISSIONS)}),PERMISSIONS_SUPPORT=WA_PERMISSIONS_SUPPORT;let PermissionsService=(()=>{var _PermissionsService;class PermissionsService2{constructor(){this.permissions=(0,core.WQX)(WA_PERMISSIONS),this.permissionsSupported=(0,core.WQX)(WA_PERMISSIONS_SUPPORT)}state(nameOrDescriptor){const descriptor="string"==typeof nameOrDescriptor?{name:nameOrDescriptor}:nameOrDescriptor;return new Observable.c(subscriber=>this.permissionsSupported?(0,from.H)(this.permissions.query(descriptor)).pipe((0,switchMap.n)(status=>(0,fromEvent.R)(status,"change").pipe((0,startWith.Z)(null),(0,map.T)(()=>status.state)))).subscribe(subscriber):(subscriber.error("Permissions is not supported in your browser"),new Subscription.yU)).pipe((0,shareReplay.t)({bufferSize:1,refCount:!0}))}}return(_PermissionsService=PermissionsService2).\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||_PermissionsService)},_PermissionsService.\u0275prov=core.jDH({token:_PermissionsService,factory:_PermissionsService.\u0275fac,providedIn:"root"}),PermissionsService2})();function isGranted(state){return"granted"===state}function isDenied(state){return"denied"===state}},59721:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>PermissionsPage});var common_module_Dx7dWex5=__webpack_require__(81359),core=__webpack_require__(27083),src=__webpack_require__(13270),permissions_src=__webpack_require__(8315),ngx_highlightjs=__webpack_require__(45750),BehaviorSubject=__webpack_require__(61204),tap=__webpack_require__(60149),catchError=__webpack_require__(40933),of=__webpack_require__(76145);function PermissionsPage_Conditional_10_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.EFF(1," Unfortunately we could not show what the code snippet above would render due to an error: "),core.nrm(2,"br"),core.j41(3,"b"),core.EFF(4),core.k0s()()),2&rf){core.XpG();const error_r1=core.r8f(6);core.R7$(4),core.JRh(error_r1)}}function PermissionsPage_Conditional_11_Template(rf,ctx){if(1&rf&&(core.j41(0,"div")(1,"p"),core.EFF(2,"The sample above would render the following:"),core.k0s(),core.nrm(3,"hr"),core.j41(4,"h2",1),core.EFF(5),core.k0s(),core.nrm(6,"hr"),core.j41(7,"p"),core.EFF(8,"Go ahead and change your browser Location permission as shown below to see this change reflected above."),core.k0s(),core.j41(9,"div",1),core.nrm(10,"img",2),core.k0s()()),2&rf){core.XpG();const geolocationState_r2=core.r8f(8);core.R7$(5),core.SpI("Geolocation state: ",geolocationState_r2,"")}}let PermissionsPage=(()=>{var _PermissionsPage;class PermissionsPage2{constructor(){this.navigator=(0,core.WQX)(src.Rp),this.error$=new BehaviorSubject.t(null),this.basicSample="import { PermissionsService } from '@ng-web-apis/permissions';\n\n@Component({\n  selector: 'main',\n  template: `\n    <h2>Geolocation state: {{ geolocationState$ | async }}</h2>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class App {\n  geolocationState$ = this.permissionsService.state('geolocation');\n\n  constructor(\n    private readonly permissionsService: PermissionsService,\n  ) {}\n}\n",this.geolocationState$=(0,core.WQX)(permissions_src.Kn).state("geolocation").pipe((0,tap.M)(state=>{"prompt"===state&&(alert("After you acknowledge this message the browser will ask your permission to allow location access!"),this.navigator.geolocation.getCurrentPosition(()=>{}))}),(0,catchError.W)(error=>(this.error$.next(error.message),(0,of.of)(null))))}}return(_PermissionsPage=PermissionsPage2).\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||_PermissionsPage)},_PermissionsPage.\u0275cmp=core.VBU({type:_PermissionsPage,selectors:[["permissions-page"]],decls:12,vars:9,consts:[[3,"highlight"],[1,"align-center"],["alt","Click on 'View site information' icon next to the address bar and change selected permission for Location","src","assets/change-permissions-instructions.jpg"]],template:function(rf,ctx){if(1&rf&&(core.EFF(0,"The following example shows basic usage of\n"),core.j41(1,"code"),core.EFF(2,"PermissionsService"),core.k0s(),core.EFF(3,"\n: "),core.j41(4,"pre"),core.nrm(5,"code",0),core.k0s(),core.SS7(6),core.nI1(7,"async"),core.SS7(8),core.nI1(9,"async"),core.DNE(10,PermissionsPage_Conditional_10_Template,5,1,"div")(11,PermissionsPage_Conditional_11_Template,11,1,"div")),2&rf){core.R7$(5),core.Y8G("highlight",ctx.basicSample),core.R7$();const error_r3=core.bH3(core.bMT(7,3,ctx.error$));core.R7$(2);const geolocationState_r4=core.bH3(core.bMT(9,6,ctx.geolocationState$));core.R7$(2),core.vxM(error_r3?10:-1),core.R7$(),core.vxM(geolocationState_r4?11:-1)}},dependencies:[common_module_Dx7dWex5.MD,common_module_Dx7dWex5.Jj,ngx_highlightjs.fw,ngx_highlightjs.f4],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}"],changeDetection:0}),PermissionsPage2})()}};