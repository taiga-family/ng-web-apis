"use strict";exports.id=717,exports.ids=[717],exports.modules={75717:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>WorkersPage});var xhr_BfNfxNDv=__webpack_require__(35347),common_module_Dx7dWex5=__webpack_require__(81359),core=__webpack_require__(27083),asyncToGenerator=__webpack_require__(73308),Observable=__webpack_require__(38041),empty=__webpack_require__(45423),merge=__webpack_require__(85122),fromEvent=__webpack_require__(55014),tap=__webpack_require__(60149),takeUntil=__webpack_require__(64409),Subject=__webpack_require__(1377),take=__webpack_require__(48513);class web_worker_WebWorker extends Observable.c{constructor(url,options){let worker,error;try{worker=new Worker(url,options)}catch(e){error=e}super(subscriber=>{let eventStream$=empty.w;error?subscriber.error(error):this.destroy$.isStopped?subscriber.complete():worker&&(eventStream$=(0,merge.h)((0,fromEvent.R)(worker,"message").pipe((0,tap.M)(event=>subscriber.next(event))),(0,fromEvent.R)(worker,"error").pipe((0,tap.M)(event=>subscriber.error(event)))).pipe((0,takeUntil.Q)(this.destroy$))),eventStream$.subscribe().add(subscriber)}),this.worker=worker,this.url=url,this.destroy$=new Subject.B}static fromFunction(fn,options){return new web_worker_WebWorker(web_worker_WebWorker.createFnUrl(fn),options)}static execute(fn,data){return(0,asyncToGenerator.A)(function*(){const worker=web_worker_WebWorker.fromFunction(fn),promise=worker.pipe((0,take.s)(1)).toPromise();return worker.postMessage(data),promise.then(result=>(worker.terminate(),result))})()}static createFnUrl(fn){const blob=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${fn});`],{type:"text/javascript"});return URL.createObjectURL(blob)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(value){this.worker&&this.worker.postMessage(value)}}var map=__webpack_require__(55514),taiga_ui_core_components_button=__webpack_require__(42026),taiga_ui_core_components_notification=__webpack_require__(94571),timer=__webpack_require__(44046);let Clock=(()=>{var _Clock;class Clock2{constructor(){this.date$=(0,timer.O)(0,1e3).pipe((0,map.T)(()=>Date.now()))}}return(_Clock=Clock2).\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||_Clock)},_Clock.\u0275cmp=core.VBU({type:_Clock,selectors:[["app-clock"]],decls:3,vars:6,template:function(rf,ctx){1&rf&&(core.EFF(0),core.nI1(1,"async"),core.nI1(2,"date")),2&rf&&core.SpI(" ",core.i5U(2,3,core.bMT(1,1,ctx.date$),"mediumTime")," ")},dependencies:[common_module_Dx7dWex5.MD,common_module_Dx7dWex5.Jj,common_module_Dx7dWex5.vh],encapsulation:2,changeDetection:0}),Clock2})();function WorkersPage_Conditional_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.nrm(0,"app-clock"),core.j41(1,"div",0)(2,"button",1),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.workerThread.postMessage())}),core.EFF(3," Run in worker process "),core.k0s(),core.j41(4,"p"),core.EFF(5),core.nI1(6,"async"),core.k0s(),core.j41(7,"tui-notification",2),core.EFF(8,"This would be calculated in several seconds in a background thread"),core.k0s()(),core.j41(9,"div",0)(10,"button",1),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.emitter.next())}),core.EFF(11," Run in main process "),core.k0s(),core.j41(12,"p"),core.EFF(13),core.nI1(14,"async"),core.k0s(),core.j41(15,"tui-notification",2),core.EFF(16,"This would freeze your main thread for several seconds"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(5),core.SpI("Execution time: ",core.bMT(6,2,ctx_r1.workerData$),""),core.R7$(8),core.SpI("Execution time: ",core.bMT(14,4,ctx_r1.result$),"")}}function startCompute(){const start=performance.now();return Array.from({length:16e3}).forEach((_,index)=>Array.from({length:index}).reduce(sum=>sum+1,0)),performance.now()-start}let WorkersPage=(()=>{var _WorkersPage;class WorkersPage2{constructor(){this.platformId=(0,core.WQX)(core.Agw),this.isBrowser=(0,xhr_BfNfxNDv.UE)(this.platformId),this.workerThread=web_worker_WebWorker.fromFunction(startCompute),this.workerData$=this.workerThread.pipe(function to_data_toData(){return(0,map.T)(({data})=>data)}()),this.emitter=new Subject.B,this.result$=this.emitter.pipe((0,map.T)(startCompute))}}return(_WorkersPage=WorkersPage2).\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||_WorkersPage)},_WorkersPage.\u0275cmp=core.VBU({type:_WorkersPage,selectors:[["workers-page"]],decls:1,vars:1,consts:[[1,"example"],["appearance","secondary","tuiButton","","type","button",3,"click"],["size","m"]],template:function(rf,ctx){1&rf&&core.DNE(0,WorkersPage_Conditional_0_Template,17,6),2&rf&&core.vxM(ctx.isBrowser?0:-1)},dependencies:[Clock,common_module_Dx7dWex5.MD,common_module_Dx7dWex5.Jj,taiga_ui_core_components_button.p,taiga_ui_core_components_notification.wS],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.example[_ngcontent-%COMP%]{min-inline-size:22.5rem;border-top:1px solid #dcdcdc;margin-block-start:1rem;padding-block-start:1rem}"],changeDetection:0}),WorkersPage2})()}};