"use strict";exports.id=717,exports.ids=[717],exports.modules={75717:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>workers_page_component});var common=__webpack_require__(16727),core=__webpack_require__(75407),asyncToGenerator=__webpack_require__(73308),Observable=__webpack_require__(38041),empty=__webpack_require__(45423),merge=__webpack_require__(85122),fromEvent=__webpack_require__(55014),tap=__webpack_require__(60149),takeUntil=__webpack_require__(64409),Subject=__webpack_require__(1377),take=__webpack_require__(48513);class web_worker_WebWorker extends Observable.c{constructor(url,options){let worker,error;try{worker=new Worker(url,options)}catch(e){error=e}super(subscriber=>{let eventStream$=empty.w;error?subscriber.error(error):this.destroy$.isStopped?subscriber.complete():worker&&(eventStream$=(0,merge.h)((0,fromEvent.R)(worker,"message").pipe((0,tap.M)(event=>subscriber.next(event))),(0,fromEvent.R)(worker,"error").pipe((0,tap.M)(event=>subscriber.error(event)))).pipe((0,takeUntil.Q)(this.destroy$))),eventStream$.subscribe().add(subscriber)}),this.worker=worker,this.url=url,this.destroy$=new Subject.B}static fromFunction(fn,options){return new web_worker_WebWorker(web_worker_WebWorker.createFnUrl(fn),options)}static execute(fn,data){return(0,asyncToGenerator.A)(function*(){const worker=web_worker_WebWorker.fromFunction(fn),promise=worker.pipe((0,take.s)(1)).toPromise();return worker.postMessage(data),promise.then(result=>(worker.terminate(),result))})()}static createFnUrl(fn){const blob=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${fn});`],{type:"text/javascript"});return URL.createObjectURL(blob)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(value){this.worker&&this.worker.postMessage(value)}}var map=__webpack_require__(55514),taiga_ui_core_components_button=__webpack_require__(42026),taiga_ui_core_components_notification=__webpack_require__(94571),timer=__webpack_require__(44046);let Clock=(()=>{var _Clock;class Clock2{constructor(){this.date$=(0,timer.O)(0,1e3).pipe((0,map.T)(()=>Date.now()))}}return(_Clock=Clock2).\u0275fac=function(t){return new(t||_Clock)},_Clock.\u0275cmp=core.VBU({type:_Clock,selectors:[["app-clock"]],standalone:!0,features:[core.aNF],decls:3,vars:6,template:function(rf,ctx){1&rf&&(core.EFF(0),core.nI1(1,"date"),core.nI1(2,"async")),2&rf&&core.SpI(" ",core.i5U(1,1,core.bMT(2,4,ctx.date$),"mediumTime")," ")},dependencies:[common.MD,common.Jj,common.vh],encapsulation:2,changeDetection:0}),Clock2})();function WorkersPage_ng_container_0_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.qex(0),core.nrm(1,"app-clock"),core.j41(2,"div",1)(3,"button",2),core.bIt("click",function(){core.eBV(_r2);const ctx_r1=core.XpG();return core.Njj(ctx_r1.workerThread.postMessage())}),core.EFF(4," Run in worker process "),core.k0s(),core.j41(5,"p"),core.EFF(6),core.nI1(7,"async"),core.k0s(),core.j41(8,"tui-notification",3),core.EFF(9,"This would be calculated in several seconds in a background thread"),core.k0s()(),core.j41(10,"div",1)(11,"button",2),core.bIt("click",function(){core.eBV(_r2);const ctx_r3=core.XpG();return core.Njj(ctx_r3.emitter.next())}),core.EFF(12," Run in main process "),core.k0s(),core.j41(13,"p"),core.EFF(14),core.nI1(15,"async"),core.k0s(),core.j41(16,"tui-notification",3),core.EFF(17,"This would freeze your main thread for several seconds"),core.k0s()(),core.bVm()}if(2&rf){const ctx_r0=core.XpG();core.R7$(6),core.SpI("Execution time: ",core.bMT(7,2,ctx_r0.workerData$),""),core.R7$(8),core.SpI("Execution time: ",core.bMT(15,4,ctx_r0.result$),"")}}function startCompute(){const start=performance.now();return Array.from({length:16e3}).forEach((_,index)=>Array.from({length:index}).reduce(sum=>sum+1,0)),performance.now()-start}const workers_page_component=(()=>{var _WorkersPage;class WorkersPage2{constructor(){this.platformId=(0,core.WQX)(core.Agw),this.isBrowser=(0,common.UE)(this.platformId),this.workerThread=web_worker_WebWorker.fromFunction(startCompute),this.workerData$=this.workerThread.pipe(function to_data_toData(){return(0,map.T)(({data})=>data)}()),this.emitter=new Subject.B,this.result$=this.emitter.pipe((0,map.T)(startCompute))}}return(_WorkersPage=WorkersPage2).\u0275fac=function(t){return new(t||_WorkersPage)},_WorkersPage.\u0275cmp=core.VBU({type:_WorkersPage,selectors:[["workers-page"]],standalone:!0,features:[core.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"example"],["appearance","secondary","tuiButton","",3,"click"],["size","m"]],template:function(rf,ctx){1&rf&&core.DNE(0,WorkersPage_ng_container_0_Template,18,6,"ng-container",0),2&rf&&core.Y8G("ngIf",ctx.isBrowser)},dependencies:[Clock,common.MD,common.bT,common.Jj,taiga_ui_core_components_button.p,taiga_ui_core_components_notification.wS],styles:["[_nghost-%COMP%]{display:block;max-width:600px;margin:0 auto}.example[_ngcontent-%COMP%]{min-width:360px;border-top:1px solid gainsboro;margin-top:16px;padding-top:16px}"],changeDetection:0}),WorkersPage2})()}};