"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[736],{6736:(w,u,s)=>{s.r(u),s.d(u,{default:()=>k});var o=s(1423),g=s(6610),c=s(8041),d=s(3490),e=s(2978);function f(a,i){if(1&a){const t=e.RV6();e.j41(0,"div",8),e.bIt("click",function(){const p=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.addToShippingCard(p))}),e.nrm(1,"img",9),e.j41(2,"label",10),e.EFF(3),e.k0s(),e.j41(4,"p",11),e.EFF(5),e.k0s()()}if(2&a){const t=i.$implicit;e.R7$(1),e.Y8G("src",t.image,e.B4B),e.R7$(2),e.JRh(t.label),e.R7$(2),e.SpI("",t.price," \u20bd")}}function b(a,i){if(1&a&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&a){const t=i.$implicit;e.Y8G("paymentAmount",t.amount)("paymentLabel",t.label),e.R7$(1),e.E5c(" ",t.label," (",t.amount.value," ",t.amount.currency,") ")}}function v(a,i){if(1&a&&(e.qex(0),e.DNE(1,b,2,5,"div",12),e.bVm()),2&a){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.shippingCart)}}function P(a,i){1&a&&e.EFF(0,"Nothing added")}class m{constructor(i,t,n){(0,o.A)(this,"image",void 0),(0,o.A)(this,"label",void 0),(0,o.A)(this,"price",void 0),this.image=i,this.label=t,this.price=n}get amount(){return{currency:"RUB",value:String(this.price)}}}let F=(()=>{var a;class i{constructor(){(0,o.A)(this,"items",[new m("https://image.flaticon.com/icons/svg/1868/1868178.svg","Matryoshka",50),new m("https://image.flaticon.com/icons/svg/820/820158.svg","Balalaika",100),new m("https://image.flaticon.com/icons/svg/1868/1868169.svg","Ushanka",70),new m("https://image.flaticon.com/icons/svg/1868/1868226.svg","Kokoshnik",70),new m("https://image.flaticon.com/icons/svg/1868/1868276.svg","Borscht",10),new m("https://image.flaticon.com/icons/svg/1868/1868380.svg","Sputnik",1e3)]),(0,o.A)(this,"shippingCart",[])}get totalSum(){return this.shippingCart.reduce((n,r)=>n+r.price,0)}get total(){return{label:"Total",amount:{currency:"RUB",value:String(this.totalSum)}}}addToShippingCard(n){this.shippingCart=[...this.shippingCart,n]}onPayment(n){console.info("payment response:",n),this.clearShippingCart(),n.complete()}onPaymentError(n){console.info("payment error:",n),this.clearShippingCart()}clearShippingCart(){this.shippingCart=[]}}return a=i,(0,o.A)(i,"\u0275fac",function(n){return new(n||a)}),(0,o.A)(i,"\u0275cmp",e.VBU({type:a,selectors:[["app-shop"]],standalone:!0,features:[e.aNF],decls:15,vars:6,consts:[[1,"items"],["class","item",3,"click",4,"ngFor","ngForOf"],["waPayment","",1,"shopping-cart",3,"paymentTotal"],[1,"sticky"],[4,"ngIf","ngIfElse"],["noItems",""],[1,"total"],["type","button",1,"buy-button",3,"disabled","waPaymentError","waPaymentSubmit"],[1,"item",3,"click"],["alt","item","width","64",1,"item-image",3,"src"],[1,"item-label"],[1,"item-price"],["waPaymentItem","","class","shopping-card-item",3,"paymentAmount","paymentLabel",4,"ngFor","ngForOf"],["waPaymentItem","",1,"shopping-card-item",3,"paymentAmount","paymentLabel"]],template:function(n,r){if(1&n&&(e.j41(0,"div",0),e.DNE(1,f,6,3,"div",1),e.k0s(),e.j41(2,"div",2)(3,"div",3)(4,"h4"),e.EFF(5,"Shopping Cart"),e.k0s(),e.DNE(6,v,2,1,"ng-container",4),e.DNE(7,P,1,0,"ng-template",null,5,e.C5r),e.j41(9,"div",6)(10,"b"),e.EFF(11,"Total:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"button",7),e.bIt("waPaymentError",function(l){return r.onPaymentError(l)})("waPaymentSubmit",function(l){return r.onPayment(l)}),e.EFF(14," Buy "),e.k0s()()()),2&n){const p=e.sdS(8);e.R7$(1),e.Y8G("ngForOf",r.items),e.R7$(1),e.Y8G("paymentTotal",r.total),e.R7$(4),e.Y8G("ngIf",r.shippingCart.length>0)("ngIfElse",p),e.R7$(6),e.SpI(" ",r.totalSum," \u20bd "),e.R7$(1),e.Y8G("disabled",0===r.shippingCart.length)}},dependencies:[g.Sq,g.bT,c.xI,c.mR,c.T9],styles:["[_nghost-%COMP%]{display:flex}.items[_ngcontent-%COMP%]{display:flex;flex:2;flex-wrap:wrap}@media (max-width: 800px){.items[_ngcontent-%COMP%]{max-inline-size:50%;justify-content:flex-end}}.item[_ngcontent-%COMP%]{display:flex;inline-size:9.375rem;margin:.75rem;padding:1rem 1rem 0;flex-direction:column;align-items:center;border:1px solid #dcdcdc;border-radius:.5rem;cursor:pointer;transition:box-shadow .3s}.item[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}.item-label[_ngcontent-%COMP%]{cursor:inherit}.item-price[_ngcontent-%COMP%]{font-size:smaller}.item-image[_ngcontent-%COMP%]{margin-block-end:.75rem}.sticky[_ngcontent-%COMP%]{position:sticky;top:1rem}.total[_ngcontent-%COMP%]{margin-block-start:1rem}.shopping-card-item[_ngcontent-%COMP%]{margin-block-start:.25rem;margin-block-end:.25rem}.shopping-cart[_ngcontent-%COMP%]{flex:1;max-inline-size:10.5rem;background-color:#f0f0f0;padding:0 1rem;border-radius:.5rem}.buy-button[_ngcontent-%COMP%]{inline-size:100%;margin-block-start:1.25rem;margin-block-end:.5rem;background-color:#fff;border:1px solid #ccc;border-radius:.25rem;padding:.25rem;cursor:pointer}.buy-button[_ngcontent-%COMP%]:disabled{cursor:default;opacity:.56}"],changeDetection:0})),i})();const k=(()=>{var a;class i{constructor(){(0,o.A)(this,"samples",{service:"import {PaymentRequestService} from '@ng-web-apis/payment-request';\n\n// ...\n\nconstructor(private readonly paymentRequest: PaymentRequestService) {}\n\npay(details: PaymentDetailsInit) {\n    this.paymentRequest.request(details).then(\n        response => {\n            response.complete();\n        },\n        error => {},\n    );\n}",directives:'<div\n  waPayment\n  [paymentTotal]="total"\n>\n  <div\n    waPaymentItem\n    [paymentLabel]="label"\n    [paymentAmount]="amount"\n  >\n    {{label}} ({{amount}})\n  </div>\n  <button\n    (waPaymentSubmit)="onPayment($event)"\n    (waPaymentError)="onError($event)"\n  >\n    Buy\n  </button>\n</div>'})}}return a=i,(0,o.A)(i,"\u0275fac",function(n){return new(n||a)}),(0,o.A)(i,"\u0275cmp",e.VBU({type:a,selectors:[["payment-request-page"]],standalone:!0,features:[e.Jv_([{provide:c.uq,useValue:[{supportedMethods:"https://apple.com/apple-pay",data:{version:3,merchantIdentifier:"merchant.com.example",merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["amex","discover","masterCard","visa"],countryCode:"US"}},{supportedMethods:"basic-card"}]}]),e.aNF],decls:45,vars:3,consts:[[1,"wrapper"],["href","https://developer.mozilla.org/en-US/docs/Web/API/Payment_Request_API","rel","noreferrer","target","_blank"],[3,"highlight"],[1,"how-it-works"],[1,"how-it-works-text"],[1,"how-it-works-point"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#wapayment","rel","noreferrer","target","_blank"],["href","https://www.w3.org/TR/payment-request/#paymentitem-dictionary","rel","noreferrer","target","_blank"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#waPaymentItem","rel","noreferrer","target","_blank"],["href","https://developer.mozilla.org/en-US/docs/Web/API/PaymentResponse","rel","noreferrer","target","_blank"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#waPaymentSubmit","rel","noreferrer","target","_blank"],[1,"directive-sample"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"p"),e.EFF(2," Angular does not have any abstractions over "),e.j41(3,"a",1),e.EFF(4," PaymentRequest API "),e.k0s(),e.EFF(5," . This library provides you two ways to use this API with Angular of 6+ version. "),e.k0s(),e.j41(6,"h3"),e.EFF(7,"As an Angular service:"),e.k0s(),e.j41(8,"pre")(9,"code",2),e.EFF(10),e.k0s()(),e.j41(11,"h3"),e.EFF(12,"As a set of directives:"),e.k0s(),e.j41(13,"p"),e.EFF(14,"Click to add some items to a shopping cart:"),e.k0s(),e.nrm(15,"app-shop"),e.j41(16,"h4"),e.EFF(17,"How it works:"),e.k0s(),e.j41(18,"div",3)(19,"div",4)(20,"p",5)(21,"a",6),e.EFF(22," waPayment "),e.k0s(),e.EFF(23," directive defines a scope for a\xa0new payment and needs "),e.j41(24,"a",7),e.EFF(25," PaymentItem "),e.k0s(),e.EFF(26," object with information about a label and a\xa0total sum of the payment "),e.k0s(),e.j41(27,"p",5),e.EFF(28," Each item of the shipping cart is a\xa0 "),e.j41(29,"a",8),e.EFF(30," waPaymentItem "),e.k0s(),e.EFF(31," directive. It\xa0is\xa0a\xa0declarative "),e.j41(32,"a",7),e.EFF(33," PaymentItem "),e.k0s(),e.EFF(34," for your Payment "),e.k0s(),e.j41(35,"p",5),e.EFF(36," Click on the button starts a\xa0PaymentRequest modal in your browser that returns "),e.j41(37,"a",9),e.EFF(38," PaymentResponse "),e.k0s(),e.EFF(39," or an error. It works due a\xa0 "),e.j41(40,"a",10),e.EFF(41," waPaymentSubmit "),e.k0s(),e.EFF(42," directive. "),e.k0s()(),e.j41(43,"pre",11),e.nrm(44,"code",2),e.k0s()()()),2&n&&(e.R7$(9),e.Y8G("highlight",r.samples.service),e.R7$(1),e.SpI("\n    ",r.samples.service,"\n"),e.R7$(34),e.Y8G("highlight",r.samples.directives))},dependencies:[g.MD,d.fw,d.f4,F],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.wrapper[_ngcontent-%COMP%]{padding:0 .625rem}.how-it-works[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap}.how-it-works-point[_ngcontent-%COMP%]{margin-block-start:1.625rem;margin-block-end:1.625rem}.how-it-works-text[_ngcontent-%COMP%]{flex:1;min-inline-size:18.75rem;margin:.5rem}.directive-sample[_ngcontent-%COMP%]{display:block;flex:1;margin:.5rem;inline-size:20.625rem}.directive-sample-arrow[_ngcontent-%COMP%]{position:absolute;right:5.9375rem;top:-2.625rem}"],changeDetection:0})),i})()}}]);