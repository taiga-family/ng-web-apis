import{b as f}from"./chunk-Y7XNAN3T.js";import{a as x}from"./chunk-PCT2X63S.js";import{B as W,Db as i,G as u,I as A,Oa as I,Xc as _,Y as M,ba as v,bd as q,ka as g,na as r,p as O,pa as n,q as T,sc as S,uc as w}from"./chunk-KG2R5REB.js";import{a as h,g as l}from"./chunk-GAL4ENT6.js";var p=new r("[WA_PAYMENT_METHODS]",{factory:()=>[{supportedMethods:"basic-card"}]});var D=new r("[WA_PAYMENT_REQUEST_SUPPORT]",{factory:()=>!!n(x).PaymentRequest});var a=class e{amount;label;pending;static \u0275fac=function(t){return new(t||e)};static \u0275dir=i({type:e,selectors:[["","waPaymentItem","","paymentAmount","","paymentLabel",""]],inputs:{amount:[0,"paymentAmount","amount"],label:[0,"paymentLabel","label"],pending:[0,"paymentPending","pending"]}})};var m=class e{total;id;modifiers;shippingOptions;displayItems;paymentItems=q(a);sync=_(()=>{this.displayItems=[...this.paymentItems()]});static \u0275fac=function(t){return new(t||e)};static \u0275dir=i({type:e,selectors:[["","waPayment","","paymentTotal",""]],contentQueries:function(t,c,N){t&1&&S(N,c.paymentItems,a,4),t&2&&w()},inputs:{total:[0,"paymentTotal","total"],id:[0,"paymentId","id"],modifiers:[0,"paymentModifiers","modifiers"],shippingOptions:[0,"paymentShippingOptions","shippingOptions"]}})};var s=new r("[WA_PAYMENT_OPTIONS]",{factory:()=>({})});var y=class e{supported=n(D);paymentMethods=n(p);paymentOptions=n(s);request(N){return l(this,arguments,function*(o,t=this.paymentMethods,c=this.paymentOptions){if(!this.supported)return Promise.reject(new Error("Payment Request is not supported in your browser"));let b=new PaymentRequest(t,o,c);return b.canMakePayment().then(R=>l(this,null,function*(){return R?b.show(o):Promise.reject(new Error("Payment Request cannot make the payment"))}))})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})};function d(e){return e instanceof Error||e instanceof DOMException}var E=class e{paymentHost=n(m);paymentRequest=n(y);nativeElement=n(I).nativeElement;methods=n(p);options=n(s);requests$=W(this.nativeElement,"click").pipe(v(()=>O(this.paymentRequest.request(h({},this.paymentHost),this.methods,this.options)).pipe(A(o=>T(o)))),M());waPaymentSubmit=f(this.requests$.pipe(u(o=>!d(o))));waPaymentError=f(this.requests$.pipe(u(d)));static \u0275fac=function(t){return new(t||e)};static \u0275dir=i({type:e,selectors:[["","waPaymentSubmit",""]],outputs:{waPaymentSubmit:"waPaymentSubmit",waPaymentError:"waPaymentError"}})};export{a,m as b,p as c,D as d,E as e};
