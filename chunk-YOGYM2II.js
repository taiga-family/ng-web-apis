import{e as M}from"./chunk-PCT2X63S.js";import{B as u,E as d,Eb as O,G as _,Y as x,Z as T,aa as a,ba as f,na as t,p as s,pa as p,q as y,r as D,u as I}from"./chunk-KG2R5REB.js";import{g as m}from"./chunk-GAL4ENT6.js";var U=new t("[WA_MIDI_SUPPORT]",{factory:()=>!!p(M).requestMIDIAccess});function n(r,e,o){return r>=e&&r<=o}function X(){return r=>r.pipe(_(({data:e})=>n(e[0]??0,128,159)),I(e=>(n(e.data[0]??0,128,143)&&(e.data[0]&&(e.data[0]+=16),e.data[2]&&(e.data[2]=0)),e)))}function pe(){return r=>r.pipe(I(({data:e})=>e))}function A(r,e=440){return 2**((r-69)/12)*e}var b=class r{transform=A;static \u0275fac=function(o){return new(o||r)};static \u0275pipe=O({name:"frequency",type:r,pure:!0})};var l=new t("[WA_SYSEX]",{factory:()=>!1});var i=new t("[WA_MIDI_ACCESS]",{factory:()=>m(null,null,function*(){let r=p(M),e=p(l);return r.requestMIDIAccess?r.requestMIDIAccess({sysex:e}):Promise.reject(new Error("Web MIDI API is not supported"))})});var P=new t("[WA_MIDI_INPUT]");function c(r){return s(p(i).catch(()=>null)).pipe(f(e=>{let o=[];return e?.[r].forEach(v=>{o.push(v)}),e?u(e,"statechange").pipe(I(()=>o),a(o)):y([])}),T(1))}var Fe=new t("[WA_MIDI_INPUTS]",{factory:()=>c("inputs")});var Ce=new t("[WA_MIDI_MESSAGES]",{factory:()=>s(p(i).catch(r=>r)).pipe(f(r=>r instanceof Error?D(r):u(r,"statechange").pipe(a(null),f(()=>{let e=[];return r.inputs.forEach(o=>{e.push(o)}),d(...e.map(o=>u(o,"midimessage")))}))),x())});var E=new t("[WA_MIDI_OUTPUT]");var Ye=new t("[WA_MIDI_OUTPUTS]",{factory:()=>c("outputs")});var W=new t("[WA_MIDI_INPUT_QUERY]");var g=new t("[WA_MIDI_OUTPUT_QUERY]");export{X as a,pe as b,b as c,Ce as d,U as e};
