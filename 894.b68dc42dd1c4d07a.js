"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[894],{6513:(B,d,o)=>{o.r(d),o.d(d,{default:()=>R});var i=o(1423),p=o(6610),e=o(2978),y=o(3308),P=o(9406),F=o(8448),W=o(2489),m=o(8129),h=o(7236),w=o(6340),k=o(6104),T=o(8486);class l extends P.c{constructor(r,n){let t,a;try{t=new Worker(r,n)}catch(c){a=c}super(c=>{let g=F.w;a?c.error(a):this.destroy$.isStopped?c.complete():t&&(g=(0,W.h)((0,m.R)(t,"message").pipe((0,h.M)(f=>c.next(f))),(0,m.R)(t,"error").pipe((0,h.M)(f=>c.error(f)))).pipe((0,w.Q)(this.destroy$))),g.subscribe().add(c)}),(0,i.A)(this,"worker",void 0),(0,i.A)(this,"url",void 0),(0,i.A)(this,"destroy$",void 0),this.worker=t,this.url=r,this.destroy$=new k.B}static fromFunction(r,n){return new l(l.createFnUrl(r),n)}static execute(r,n){return(0,y.A)(function*(){const t=l.fromFunction(r),a=t.pipe((0,T.s)(1)).toPromise();return t.postMessage(n),a.then(c=>(t.terminate(),c))})()}static createFnUrl(r){const t=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${r});`],{type:"text/javascript"});return URL.createObjectURL(t)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(r){this.worker&&this.worker.postMessage(r)}}var u=o(3527),j=o(4135),x=o(9738),M=o(3229);let E=(()=>{var s;class r{constructor(){(0,i.A)(this,"date$",(0,M.O)(0,1e3).pipe((0,u.T)(()=>Date.now())))}}return s=r,(0,i.A)(r,"\u0275fac",function(t){return new(t||s)}),(0,i.A)(r,"\u0275cmp",e.VBU({type:s,selectors:[["app-clock"]],standalone:!0,features:[e.aNF],decls:3,vars:6,template:function(t,a){1&t&&(e.EFF(0),e.nI1(1,"date"),e.nI1(2,"async")),2&t&&e.SpI(" ",e.i5U(1,1,e.bMT(2,4,a.date$),"mediumTime")," ")},dependencies:[p.MD,p.Jj,p.vh],encapsulation:2,changeDetection:0})),r})();function I(s,r){if(1&s){const n=e.RV6();e.qex(0),e.nrm(1,"app-clock"),e.j41(2,"div",1)(3,"button",2),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.workerThread.postMessage())}),e.EFF(4," Run in worker process "),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"async"),e.k0s(),e.j41(8,"tui-notification",3),e.EFF(9,"This would be calculated in several seconds in a background thread"),e.k0s()(),e.j41(10,"div",1)(11,"button",2),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.emitter.next())}),e.EFF(12," Run in main process "),e.k0s(),e.j41(13,"p"),e.EFF(14),e.nI1(15,"async"),e.k0s(),e.j41(16,"tui-notification",3),e.EFF(17,"This would freeze your main thread for several seconds"),e.k0s()(),e.bVm()}if(2&s){const n=e.XpG();e.R7$(6),e.SpI("Execution time: ",e.bMT(7,2,n.workerData$),""),e.R7$(8),e.SpI("Execution time: ",e.bMT(15,4,n.result$),"")}}function v(){const s=performance.now();return Array.from({length:16e3}).forEach((r,n)=>Array.from({length:n}).reduce(t=>t+1,0)),performance.now()-s}const R=(()=>{var s;class r{constructor(){(0,i.A)(this,"platformId",(0,e.WQX)(e.Agw)),(0,i.A)(this,"isBrowser",(0,p.UE)(this.platformId)),(0,i.A)(this,"workerThread",l.fromFunction(v)),(0,i.A)(this,"workerData$",this.workerThread.pipe(function $(){return(0,u.T)(({data:s})=>s)}())),(0,i.A)(this,"emitter",new k.B),(0,i.A)(this,"result$",this.emitter.pipe((0,u.T)(v)))}}return s=r,(0,i.A)(r,"\u0275fac",function(t){return new(t||s)}),(0,i.A)(r,"\u0275cmp",e.VBU({type:s,selectors:[["workers-page"]],standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"example"],["appearance","secondary","tuiButton","","type","button",3,"click"],["size","m"]],template:function(t,a){1&t&&e.DNE(0,I,18,6,"ng-container",0),2&t&&e.Y8G("ngIf",a.isBrowser)},dependencies:[E,p.MD,p.bT,p.Jj,j.p,x.wS],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.example[_ngcontent-%COMP%]{min-inline-size:22.5rem;border-top:1px solid #dcdcdc;margin-block-start:1rem;padding-block-start:1rem}"],changeDetection:0})),r})()}}]);