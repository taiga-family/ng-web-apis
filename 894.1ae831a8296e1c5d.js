"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[894],{6513:(B,d,n)=>{n.r(d),n.d(d,{default:()=>R});var a=n(1423),g=n(3038),p=n(6978),e=n(1489),P=n(3308),F=n(9406),W=n(8448),w=n(2489),m=n(8129),h=n(7236),T=n(6340),k=n(6104),x=n(8486);class l extends F.c{worker;url;destroy$;constructor(o,r){let t,i;try{t=new Worker(o,r)}catch(c){i=c}super(c=>{let y=W.w;i?c.error(i):this.destroy$.isStopped?c.complete():t&&(y=(0,w.h)((0,m.R)(t,"message").pipe((0,h.M)(f=>c.next(f))),(0,m.R)(t,"error").pipe((0,h.M)(f=>c.error(f)))).pipe((0,T.Q)(this.destroy$))),y.subscribe().add(c)}),this.worker=t,this.url=o,this.destroy$=new k.B}static fromFunction(o,r){return new l(l.createFnUrl(o),r)}static execute(o,r){return(0,P.A)(function*(){const t=l.fromFunction(o),i=t.pipe((0,x.s)(1)).toPromise();return t.postMessage(r),i.then(c=>(t.terminate(),c))})()}static createFnUrl(o){const t=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${o});`],{type:"text/javascript"});return URL.createObjectURL(t)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(o){this.worker&&this.worker.postMessage(o)}}var u=n(3527),j=n(4135),A=n(9738),E=n(3229);let C=(()=>{var s;class o{constructor(){(0,a.A)(this,"date$",(0,E.O)(0,1e3).pipe((0,u.T)(()=>Date.now())))}}return s=o,(0,a.A)(o,"\u0275fac",function(t){return new(t||s)}),(0,a.A)(s,"\u0275cmp",e.VBU({type:s,selectors:[["app-clock"]],decls:3,vars:6,template:function(t,i){1&t&&(e.EFF(0),e.nI1(1,"async"),e.nI1(2,"date")),2&t&&e.SpI(" ",e.i5U(2,3,e.bMT(1,1,i.date$),"mediumTime")," ")},dependencies:[p.MD,p.Jj,p.vh],encapsulation:2,changeDetection:0})),o})();function D(s,o){if(1&s){const r=e.RV6();e.nrm(0,"app-clock"),e.j41(1,"div",0)(2,"button",1),e.bIt("click",function(){e.eBV(r);const i=e.XpG();return e.Njj(i.workerThread.postMessage())}),e.EFF(3," Run in worker process "),e.k0s(),e.j41(4,"p"),e.EFF(5),e.nI1(6,"async"),e.k0s(),e.j41(7,"tui-notification",2),e.EFF(8,"This would be calculated in several seconds in a background thread"),e.k0s()(),e.j41(9,"div",0)(10,"button",1),e.bIt("click",function(){e.eBV(r);const i=e.XpG();return e.Njj(i.emitter.next())}),e.EFF(11," Run in main process "),e.k0s(),e.j41(12,"p"),e.EFF(13),e.nI1(14,"async"),e.k0s(),e.j41(15,"tui-notification",2),e.EFF(16,"This would freeze your main thread for several seconds"),e.k0s()()}if(2&s){const r=e.XpG();e.R7$(5),e.SpI("Execution time: ",e.bMT(6,2,r.workerData$),""),e.R7$(8),e.SpI("Execution time: ",e.bMT(14,4,r.result$),"")}}function v(){const s=performance.now();return Array.from({length:16e3}).forEach((o,r)=>Array.from({length:r}).reduce(t=>t+1,0)),performance.now()-s}let R=(()=>{var s;class o{constructor(){(0,a.A)(this,"platformId",(0,e.WQX)(e.Agw)),(0,a.A)(this,"isBrowser",(0,g.UE)(this.platformId)),(0,a.A)(this,"workerThread",l.fromFunction(v)),(0,a.A)(this,"workerData$",this.workerThread.pipe(function M(){return(0,u.T)(({data:s})=>s)}())),(0,a.A)(this,"emitter",new k.B),(0,a.A)(this,"result$",this.emitter.pipe((0,u.T)(v)))}}return s=o,(0,a.A)(o,"\u0275fac",function(t){return new(t||s)}),(0,a.A)(s,"\u0275cmp",e.VBU({type:s,selectors:[["workers-page"]],decls:1,vars:1,consts:[[1,"example"],["appearance","secondary","tuiButton","","type","button",3,"click"],["size","m"]],template:function(t,i){1&t&&e.DNE(0,D,17,6),2&t&&e.vxM(i.isBrowser?0:-1)},dependencies:[C,p.MD,p.Jj,j.p,A.wS],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.example[_ngcontent-%COMP%]{min-inline-size:22.5rem;border-top:1px solid #dcdcdc;margin-block-start:1rem;padding-block-start:1rem}"],changeDetection:0})),o})()}}]);