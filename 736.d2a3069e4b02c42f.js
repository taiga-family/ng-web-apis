"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[736],{6736:(k,u,s)=>{s.r(u),s.d(u,{default:()=>F});var o=s(9842),h=s(2881),p=s(9996),d=s(2165),e=s(1360);function b(a,i){if(1&a){const n=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.addToShippingCard(r))}),e.nrm(1,"img",8),e.j41(2,"label",9),e.EFF(3),e.k0s(),e.j41(4,"p",10),e.EFF(5),e.k0s()()}if(2&a){const n=i.$implicit;e.R7$(),e.Y8G("src",n.image,e.B4B),e.R7$(2),e.JRh(n.label),e.R7$(2),e.SpI("",n.price," \u20bd")}}function f(a,i){if(1&a&&(e.j41(0,"div",4),e.EFF(1),e.k0s()),2&a){const n=i.$implicit;e.Y8G("paymentAmount",n.amount)("paymentLabel",n.label),e.R7$(),e.E5c(" ",n.label," (",n.amount.value," ",n.amount.currency,") ")}}function v(a,i){1&a&&e.EFF(0," Nothing added ")}class m{constructor(i,n,t){(0,o.A)(this,"image",void 0),(0,o.A)(this,"label",void 0),(0,o.A)(this,"price",void 0),this.image=i,this.label=n,this.price=t}get amount(){return{currency:"RUB",value:String(this.price)}}}let P=(()=>{var a;class i{constructor(){(0,o.A)(this,"items",[new m("https://image.flaticon.com/icons/svg/1868/1868178.svg","Matryoshka",50),new m("https://image.flaticon.com/icons/svg/820/820158.svg","Balalaika",100),new m("https://image.flaticon.com/icons/svg/1868/1868169.svg","Ushanka",70),new m("https://image.flaticon.com/icons/svg/1868/1868226.svg","Kokoshnik",70),new m("https://image.flaticon.com/icons/svg/1868/1868276.svg","Borscht",10),new m("https://image.flaticon.com/icons/svg/1868/1868380.svg","Sputnik",1e3)]),(0,o.A)(this,"shippingCart",[])}get totalSum(){return this.shippingCart.reduce((t,r)=>t+r.price,0)}get total(){return{label:"Total",amount:{currency:"RUB",value:String(this.totalSum)}}}addToShippingCard(t){this.shippingCart=[...this.shippingCart,t]}onPayment(t){console.info("payment response:",t),this.clearShippingCart(),t.complete()}onPaymentError(t){console.info("payment error:",t),this.clearShippingCart()}clearShippingCart(){this.shippingCart=[]}}return a=i,(0,o.A)(i,"\u0275fac",function(t){return new(t||a)}),(0,o.A)(i,"\u0275cmp",e.VBU({type:a,selectors:[["app-shop"]],decls:16,vars:4,consts:[[1,"items"],[1,"item"],["waPayment","",1,"shopping-cart",3,"paymentTotal"],[1,"sticky"],["waPaymentItem","",1,"shopping-card-item",3,"paymentAmount","paymentLabel"],[1,"total"],["type","button",1,"buy-button",3,"waPaymentError","waPaymentSubmit","disabled"],[1,"item",3,"click"],["alt","item","width","64",1,"item-image",3,"src"],[1,"item-label"],[1,"item-price"]],template:function(t,r){1&t&&(e.j41(0,"div",0),e.Z7z(1,b,6,3,"div",1,e.Vm6),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"h4"),e.EFF(6,"Shopping Cart"),e.k0s(),e.Z7z(7,f,2,5,"div",4,e.Vm6,!1,v,1,0),e.j41(10,"div",5)(11,"b"),e.EFF(12,"Total:"),e.k0s(),e.EFF(13),e.k0s(),e.j41(14,"button",6),e.bIt("waPaymentError",function(c){return r.onPaymentError(c)})("waPaymentSubmit",function(c){return r.onPayment(c)}),e.EFF(15," Buy "),e.k0s()()()),2&t&&(e.R7$(),e.Dyx(r.items),e.R7$(2),e.Y8G("paymentTotal",r.total),e.R7$(4),e.Dyx(r.shippingCart),e.R7$(6),e.SpI(" ",r.totalSum," \u20bd "),e.R7$(),e.Y8G("disabled",0===r.shippingCart.length))},dependencies:[p.xI,p.mR,p.T9],styles:["[_nghost-%COMP%]{display:flex}.items[_ngcontent-%COMP%]{display:flex;flex:2;flex-wrap:wrap}@media (max-width: 800px){.items[_ngcontent-%COMP%]{max-inline-size:50%;justify-content:flex-end}}.item[_ngcontent-%COMP%]{display:flex;inline-size:9.375rem;margin:.75rem;padding:1rem 1rem 0;flex-direction:column;align-items:center;border:1px solid #dcdcdc;border-radius:.5rem;cursor:pointer;transition:box-shadow .3s}.item[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}.item-label[_ngcontent-%COMP%]{cursor:inherit}.item-price[_ngcontent-%COMP%]{font-size:smaller}.item-image[_ngcontent-%COMP%]{margin-block-end:.75rem}.sticky[_ngcontent-%COMP%]{position:sticky;top:1rem}.total[_ngcontent-%COMP%]{margin-block-start:1rem}.shopping-card-item[_ngcontent-%COMP%]{margin-block-start:.25rem;margin-block-end:.25rem}.shopping-cart[_ngcontent-%COMP%]{flex:1;max-inline-size:10.5rem;background-color:#f0f0f0;padding:0 1rem;border-radius:.5rem}.buy-button[_ngcontent-%COMP%]{inline-size:100%;margin-block-start:1.25rem;margin-block-end:.5rem;background-color:#fff;border:1px solid #ccc;border-radius:.25rem;padding:.25rem;cursor:pointer}.buy-button[_ngcontent-%COMP%]:disabled{cursor:default;opacity:.56}"],changeDetection:0})),i})(),F=(()=>{var a;class i{constructor(){(0,o.A)(this,"samples",{service:"import {WaPaymentRequestService} from '@ng-web-apis/payment-request';\n\n// ...\n\nprivate readonly paymentRequest = inject(WaPaymentRequestService)\n\npay(details: PaymentDetailsInit) {\n    this.paymentRequest.request(details).then(\n        response => {\n            response.complete();\n        },\n        error => {},\n    );\n}",directives:'<div\n  waPayment\n  [paymentTotal]="total"\n>\n  <div\n    waPaymentItem\n    [paymentLabel]="label"\n    [paymentAmount]="amount"\n  >\n    {{label}} ({{amount}})\n  </div>\n  <button\n    (waPaymentSubmit)="onPayment($event)"\n    (waPaymentError)="onError($event)"\n  >\n    Buy\n  </button>\n</div>'})}}return a=i,(0,o.A)(i,"\u0275fac",function(t){return new(t||a)}),(0,o.A)(i,"\u0275cmp",e.VBU({type:a,selectors:[["payment-request-page"]],features:[e.Jv_([{provide:p.n$,useValue:[{supportedMethods:"https://apple.com/apple-pay",data:{version:3,merchantIdentifier:"merchant.com.example",merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["amex","discover","masterCard","visa"],countryCode:"US"}},{supportedMethods:"basic-card"}]}])],decls:45,vars:3,consts:[[1,"wrapper"],["href","https://developer.mozilla.org/en-US/docs/Web/API/Payment_Request_API","rel","noreferrer","target","_blank"],[3,"highlight"],[1,"how-it-works"],[1,"how-it-works-text"],[1,"how-it-works-point"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#wapayment","rel","noreferrer","target","_blank"],["href","https://www.w3.org/TR/payment-request/#paymentitem-dictionary","rel","noreferrer","target","_blank"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#waPaymentItem","rel","noreferrer","target","_blank"],["href","https://developer.mozilla.org/en-US/docs/Web/API/PaymentResponse","rel","noreferrer","target","_blank"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/payment-request#waPaymentSubmit","rel","noreferrer","target","_blank"],[1,"directive-sample"]],template:function(t,r){1&t&&(e.j41(0,"div",0)(1,"p"),e.EFF(2," Angular does not have any abstractions over "),e.j41(3,"a",1),e.EFF(4," PaymentRequest API "),e.k0s(),e.EFF(5," . This library provides you two ways to use this API with Angular of 6+ version. "),e.k0s(),e.j41(6,"h3"),e.EFF(7,"As an Angular service:"),e.k0s(),e.j41(8,"pre")(9,"code",2),e.EFF(10),e.k0s()(),e.j41(11,"h3"),e.EFF(12,"As a set of directives:"),e.k0s(),e.j41(13,"p"),e.EFF(14,"Click to add some items to a shopping cart:"),e.k0s(),e.nrm(15,"app-shop"),e.j41(16,"h4"),e.EFF(17,"How it works:"),e.k0s(),e.j41(18,"div",3)(19,"div",4)(20,"p",5)(21,"a",6),e.EFF(22," waPayment "),e.k0s(),e.EFF(23," directive defines a scope for a\xa0new payment and needs "),e.j41(24,"a",7),e.EFF(25," PaymentItem "),e.k0s(),e.EFF(26," object with information about a label and a\xa0total sum of the payment "),e.k0s(),e.j41(27,"p",5),e.EFF(28," Each item of the shipping cart is a\xa0 "),e.j41(29,"a",8),e.EFF(30," waPaymentItem "),e.k0s(),e.EFF(31," directive. It\xa0is\xa0a\xa0declarative "),e.j41(32,"a",7),e.EFF(33," PaymentItem "),e.k0s(),e.EFF(34," for your Payment "),e.k0s(),e.j41(35,"p",5),e.EFF(36," Click on the button starts a\xa0PaymentRequest modal in your browser that returns "),e.j41(37,"a",9),e.EFF(38," PaymentResponse "),e.k0s(),e.EFF(39," or an error. It works due a\xa0 "),e.j41(40,"a",10),e.EFF(41," waPaymentSubmit "),e.k0s(),e.EFF(42," directive. "),e.k0s()(),e.j41(43,"pre",11),e.nrm(44,"code",2),e.k0s()()()),2&t&&(e.R7$(9),e.Y8G("highlight",r.samples.service),e.R7$(),e.SpI("\n    ",r.samples.service,"\n"),e.R7$(34),e.Y8G("highlight",r.samples.directives))},dependencies:[h.MD,d.fw,d.f4,P],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.wrapper[_ngcontent-%COMP%]{padding:0 .625rem}.how-it-works[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap}.how-it-works-point[_ngcontent-%COMP%]{margin-block-start:1.625rem;margin-block-end:1.625rem}.how-it-works-text[_ngcontent-%COMP%]{flex:1;min-inline-size:18.75rem;margin:.5rem}.directive-sample[_ngcontent-%COMP%]{display:block;flex:1;margin:.5rem;inline-size:20.625rem}.directive-sample-arrow[_ngcontent-%COMP%]{position:absolute;right:5.9375rem;top:-2.625rem}"],changeDetection:0})),i})()}}]);