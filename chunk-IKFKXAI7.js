import{a as vt}from"./chunk-S4KLR4OQ.js";import{a as ht}from"./chunk-5PZMI3PJ.js";import{b as _t,c as xt,d as de,e as Tt,f as $,h as St,m as yt}from"./chunk-LWKLXDKO.js";import{B as ft,C as gt,G as y,q as ct,u as dt,w as mt,x as ut}from"./chunk-3VG4TGX5.js";import{b as nt}from"./chunk-NSMAPXG6.js";import{a as ot,d as rt}from"./chunk-MVBQ4QH2.js";import{d as pt}from"./chunk-OTLIHRLE.js";import"./chunk-7DO6NSGI.js";import{b as at,c as st,e as lt}from"./chunk-JYWUUMHF.js";import{A as qe,E as Ke,H as Je,K as et,S as tt,k as Xe,l as Qe,m as L,o as ce,pa as it}from"./chunk-34U4OIOH.js";import{a as Le,b as Ue,c as je,e as $e,f as Ge,i as Ye}from"./chunk-5OKOC4JC.js";import"./chunk-P3XR4P57.js";import{b as j}from"./chunk-UNR3ZOEG.js";import{d as Ze}from"./chunk-Y7XNAN3T.js";import{f as U,g as P}from"./chunk-PCT2X63S.js";import"./chunk-QAYQBKTV.js";import{i as Fe,l as We,p as Ve}from"./chunk-X37QOLRV.js";import{$ as Se,$c as pe,Ac as Ae,B as fe,Bb as g,Bc as W,Cc as De,Db as C,E as ge,Eb as z,Ec as ae,Fa as q,Fc as se,G as Q,Gb as B,Gc as le,Hb as b,Hc as Re,Ic as He,Jc as ze,Kc as A,La as be,Mc as V,Oa as H,Ob as Ee,Oc as w,Pb as k,Pc as D,Qc as Be,Rb as M,Sa as we,Sb as ee,Ub as te,Uc as Ne,V as Z,Vb as ie,W as _e,Wb as S,X as xe,Xb as l,Y as Te,Yb as s,Zb as I,Zc as R,_c as u,aa as ye,ac as Oe,bc as ke,cc as Me,d as ue,da as ve,e as he,fc as N,gc as ne,jb as c,jc as _,ka as Ce,lc as d,na as f,pa as r,pb as Pe,rb as K,tc as oe,u as m,uc as Ie,wa as x,wb as J,wc as re,xa as T,xc as F,zc as p}from"./chunk-KG2R5REB.js";import"./chunk-GAL4ENT6.js";var G=class t{speechSynthesisRef=r(P);paused=u(!1,{alias:"waTextToSpeechPaused"});onend=R({alias:"waTextToSpeechEnd"});onmark=R({alias:"waTextToSpeechMark"});onerror=R({alias:"waTextToSpeechError"});onboundary=R({alias:"waTextToSpeechBoundary"});set waTextToSpeech(e){this.speechSynthesisRef.cancel(),this.speechSynthesisRef.pause(),e.onerror=i=>this.onerror.emit(i),e.onend=i=>this.onend.emit(i),e.onmark=i=>this.onmark.emit(i),e.onboundary=i=>this.onboundary.emit(i),this.speechSynthesisRef.speak(e)}ngOnChanges(){this.paused()?this.speechSynthesisRef.pause():this.speechSynthesisRef.resume()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=C({type:t,selectors:[["","waTextToSpeech",""]],inputs:{waTextToSpeech:"waTextToSpeech",paused:[1,"waTextToSpeechPaused","paused"]},outputs:{onend:"waTextToSpeechEnd",onmark:"waTextToSpeechMark",onerror:"waTextToSpeechError",onboundary:"waTextToSpeechBoundary"},features:[be]})};function Ct(){return xe((t,e)=>[...t.filter(({isFinal:i})=>i),...e],[])}function v(t){let e=t.toLowerCase().trim();return i=>!!i.find(o=>o.isFinal&&o[0]?.transcript.toLowerCase().trim()===e)}function bt(t){let e=v(t);return ue(Se(i=>!e(i)),m((i,o)=>o?i:[]))}function wt(t){let e=v(t);return ve(i=>!e(i))}var Y=class t{transform(e,{lang:i="",pitch:o=1,rate:n=1,volume:a=1,voice:O=null}={}){let h=new SpeechSynthesisUtterance(e);return h.lang=i,h.pitch=o,h.rate=n,h.volume=a,h.voice=O,h}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"waUtterance",type:t,pure:!0})};var Pt=new f("[WA_SPEECH_RECOGNITION_MAX_ALTERNATIVES]",{factory:()=>1});var X=class t extends he{classRef=r(U);lang=r(Ne,{optional:!0});maxAlternatives=r(Pt);ngZone=r(Pe);constructor(){super(e=>{if(!this.classRef)return e.error(new Error("SpeechRecognition is not supported")),()=>{};let i=new this.classRef;return i.maxAlternatives=this.maxAlternatives,i.lang=this.lang??"",i.interimResults=!0,i.onerror=o=>e.error(o),i.onend=()=>e.complete(),i.onresult=({results:o})=>this.ngZone.run(()=>e.next(Array.from({length:o.length},(n,a)=>o[a]))),i.start(),()=>i.abort()})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})};var Pi=new f("[WA_SPEECH_RECOGNITION_SUPPORT]",{factory:()=>!!r(U)});var Mi=new f("[WA_SPEECH_SYNTHESIS_SUPPORT]",{factory:()=>!!r(P)});var Et=new f("[WA_SPEECH_SYNTHESIS_VOICES]",{factory:()=>{let t=r(P);return fe(t,"voiceschanged").pipe(ye(null),m(()=>t.getVoices()))}});var At=["text"],Dt=["tuiTextarea",""],Rt=t=>({$implicit:t});function Ht(t,e){if(t&1){let i=N();l(0,"tui-scroll-controls",4),_("click.prevent",function(){return x(i),T(0)}),s()}}function zt(t,e){if(t&1&&(ke(0),p(1),Me()),t&2){let i=e.polymorpheusOutlet;c(),Ae(i)}}function Bt(t,e){if(t&1&&(k(0,Ht,1,0,"tui-scroll-controls",1),l(1,"span",2,0),b(3,zt,2,1,"ng-container",3),s()),t&2){let i=d();M(i.isMobile?-1:0),c(),re("max-height",1.25*i.max(),"em")("min-height",1.25*i.min(),"em"),c(2),S("polymorpheusOutlet",i.content())("polymorpheusOutletContext",V(7,Rt,i.el.value))}}var[Nt,Ft]=L({min:1,max:3,content:({$implicit:t})=>t}),Ot=(()=>{let e=class e{constructor(){this.template=pe.required(K),this.options=r(Nt),this.vcr=r(J),this.text=pe("text",{read:H}),this.el=qe(),this.textfield=r(y),this.isMobile=r(j),this.min=u(this.options.min),this.max=u(this.options.max),this.content=u(this.options.content)}ngAfterViewInit(){this.vcr.createEmbeddedView(this.template())}onScroll(){this.text()?.nativeElement.scrollTo({top:this.el.scrollTop})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["textarea","tuiTextarea",""]],viewQuery:function(n,a){n&1&&(oe(a.template,K,5),oe(a.text,At,5,H)),n&2&&Ie(2)},hostAttrs:["ngSkipHydration","true"],hostVars:2,hostBindings:function(n,a){n&1&&_("scroll.zoneless",function(){return a.onScroll()})("scroll.once",function(){return a.onScroll()}),n&2&&F("_mobile",a.isMobile)},inputs:{min:[1,"min"],max:[1,"max"],content:[1,"content"]},features:[A([ce(ot,H)]),B([_t])],attrs:Dt,decls:1,vars:0,consts:[["text",""],[1,"t-scroll"],["aria-hidden","true",1,"t-ghost"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-scroll",3,"click.prevent"]],template:function(n,a){n&1&&b(0,Bt,4,9,"ng-template")},dependencies:[lt,rt],styles:['tui-textfield._with-label[data-size="m"]._with-label[data-size="m"][_nghost-%COMP%], tui-textfield._with-label[data-size="m"]._with-label[data-size="m"]   [_nghost-%COMP%]{border-block-start-width:calc(.5rem + var(--t-height) / 3);padding-block:0}tui-textfield._with-label[data-size="l"]._with-label[data-size="l"][_nghost-%COMP%], tui-textfield._with-label[data-size="l"]._with-label[data-size="l"]   [_nghost-%COMP%]{border-block-start-width:calc(.625rem + var(--t-height) / 3);padding-block:0}tui-textfield[data-size="s"][_nghost-%COMP%], tui-textfield[data-size="s"]   [_nghost-%COMP%]{padding-block:.5rem .25rem}tui-textfield[data-size="m"][_nghost-%COMP%], tui-textfield[data-size="m"]   [_nghost-%COMP%]{padding-block:.875rem .25rem}tui-textfield[data-size="l"][_nghost-%COMP%], tui-textfield[data-size="l"]   [_nghost-%COMP%]{padding-block:1.125rem .375rem}[_nghost-%COMP%]{word-break:break-word;border:0 solid transparent}[_nghost-%COMP%]:not(._mobile){scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%]:not(._mobile)::-webkit-scrollbar, [_nghost-%COMP%]:not(._mobile)::-webkit-scrollbar-thumb{display:none}.t-scroll[_ngcontent-%COMP%]{position:absolute;inset:.25rem 0;min-block-size:0}  tui-textfield._with-label[data-size=m] .t-scroll{top:calc(.5rem + var(--t-height) / 3)}  tui-textfield._with-label[data-size=l] .t-scroll{top:calc(.625rem + var(--t-height) / 3)}.t-ghost[_ngcontent-%COMP%]{position:relative;z-index:1;order:1;inline-size:calc(100% - var(--t-start) - var(--t-end) - var(--t-side, 0rem));white-space:pre-wrap;word-break:break-word;overflow-wrap:break-word;padding-inline-start:var(--t-start);padding-inline-end:calc(var(--t-end) + var(--t-side, 0rem));pointer-events:none;box-sizing:content-box;overflow:hidden;color:transparent}.t-ghost[_ngcontent-%COMP%]:after{content:" "}  tui-textfield._with-label[data-size=m] textarea~.t-ghost{margin-block-start:-1.375rem;padding-block-end:.3125rem}  tui-textfield._with-label[data-size=l] textarea~.t-ghost{margin-block-start:-1.75rem;padding-block-end:.5rem}  tui-textfield[data-size=s] textarea~.t-ghost{margin-block-start:-1.5rem;padding-block-end:.5rem}  tui-textfield[data-size=m] textarea~.t-ghost{margin-block-start:-2rem;padding-block-end:.875rem}  tui-textfield[data-size=l] textarea~.t-ghost{margin-block-start:-2.5rem;padding-block-end:1rem}'],changeDetection:0});let t=e;return t})(),Wt=(()=>{let e=class e{constructor(){this.limit=q(0),this.length=q(0)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:1,vars:2,template:function(n,a){n&1&&p(0),n&2&&De("",a.length()," / ",a.limit())},styles:["[_nghost-%COMP%]{z-index:1;inline-size:100%;order:2;text-align:end;pointer-events:none;padding-block-end:.75rem;font:var(--tui-font-ui-xs);color:var(--tui-text-secondary)}"],changeDetection:0});let t=e;return t})(),Vt=(()=>{let e=class e{constructor(){this.limit=r(Ut).limit,this.context=at()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:2,vars:2,consts:[[3,"textContent"]],template:function(n,a){n&1&&Oe(0,"span",0)(1,"span",0),n&2&&(ne("textContent",a.context.$implicit.slice(0,a.limit())),c(),ne("textContent",a.context.$implicit.slice(a.limit())))},styles:["span[_ngcontent-%COMP%]:last-child{background:linear-gradient(transparent .25rem,var(--tui-status-negative-pale) .25rem,var(--tui-status-negative-pale) 100%)}"],changeDetection:0});let t=e;return t})(),Lt=new st(Vt),Ut=(()=>{let e=class e{constructor(){this.textfield=r(y),this.ref=r(J).createComponent(Wt),this.size=r(gt).size,this.limit=u(0)}ngDoCheck(){this.ref.instance.length.set(this.textfield.value().length),this.ref.instance.limit.set(this.limit())}validate(o){return je.maxLength(this.limit())(o)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=C({type:e,selectors:[["","tuiTextarea","","limit",""]],hostVars:2,hostBindings:function(n,a){n&2&&re("border-block-end-width",a.size()==="l"?1.875:1.75,"rem")},inputs:{limit:[1,"limit"]},features:[A([ce(Ue,e,!0),Ft({content:Lt})])]});let t=e;return t})();var[kt,In]=L({icon:"",appearance:"icon"}),jt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],hostAttrs:[1,"tui-tooltip"],decls:0,vars:0,template:function(n,a){},styles:[`[tuiTooltip]{border-width:.125rem;border-radius:100%;cursor:pointer;pointer-events:auto;background-clip:content-box!important}[tuiTooltip] [tuiBlock],[tuiTooltip] [tuiCell][data-size=s],[tuiLabel][data-orientation=horizontal] [tuiTooltip],[tuiTooltip][data-size=s]{font-size:1.25rem}[tuiTitle] [tuiTooltip]{font-size:1rem;border:none}[tuiTooltip]:before{font-size:1rem}@media (hover: hover) and (pointer: fine){tui-textfield:hover [tuiTooltip][data-appearance=icon]:before,tui-textarea:hover [tuiTooltip][data-appearance=icon]:before{color:var(--tui-text-secondary)}}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),Mt=(()=>{let e=class e{constructor(){this.textfield=r(y,{optional:!0}),this.isMobile=r(j),this.describe=r($),this.driver=r(de),this.nothing=Qe(jt),this.state=Je(Ze(r(de).pipe(m(o=>o?"hover":null),tt()),{initialValue:null})),this.size=u("m")}ngDoCheck(){this.textfield?.id&&Xe(this.describe.id,this.textfield.id)}onClick(o){this.isMobile?(o.preventDefault(),o.stopPropagation()):this.driver.toggle()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=C({type:e,selectors:[["tui-icon","tuiTooltip",""]],hostAttrs:["tuiTooltip",""],hostVars:1,hostBindings:function(n,a){n&1&&_("click.prevent",function(){return 0})("mousedown",function(h){return a.onClick(h)}),n&2&&Ee("data-size",a.size())},inputs:{size:[1,"size"]},features:[A([Ke(kt),{provide:it,useFactory:()=>r(kt).icon||r(xt).icon}]),B([et,{directive:$,inputs:["tuiHintDescribe","tuiTooltipDescribe"]},{directive:Tt,inputs:["tuiHint","tuiTooltip","tuiHintAppearance","tuiHintAppearance","tuiHintContext","tuiHintContext"]}])]});let t=e;return t})();var It=(()=>{let e=class e{transform(o){return n=>String(n[o]??"")}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=z({name:"tuiStringify",type:e,pure:!0});let t=e;return t})();var $t=t=>({lang:"en-US",voice:t});function Gt(t,e){if(t&1&&(l(0,"span",12),p(1),s()),t&2){let i=e.$implicit;F("transcript_final",i.isFinal),c(),W(" ",i[0]==null?null:i[0].transcript," ")}}function Yt(t,e){if(t&1&&te(0,Gt,2,3,"span",11,ee),t&2){d();let i=ze(4);ie(i)}}function Xt(t,e){t&1&&p(0," Say \xABOk, Angular\xBB... ")}function Qt(t,e){if(t&1&&(l(0,"button",13),p(1),s()),t&2){let i=e.$implicit;S("value",i),c(),W(" ",i.name," ")}}function Zt(t,e){if(t&1&&(l(0,"tui-data-list"),te(1,Qt,2,2,"button",13,ee),w(3,"async"),s()),t&2){let i=d(2);c(),ie(D(3,0,i.voices$))}}function qt(t,e){t&1&&(l(0,"tui-drawer")(1,"div",14)(2,"h2"),p(3,"More from @ng-web-apis"),s(),l(4,"a",15)(5,"h3"),p(6,"Workers"),s(),I(7,"img",16),s(),l(8,"a",17)(9,"h3"),p(10,"Canvas"),s(),I(11,"img",18),s(),l(12,"a",19)(13,"h3"),p(14,"Audio"),s(),I(15,"img",20),s(),l(16,"a",21),p(17," See all "),s(),p(18," Tip: say \xABHide sidebar\xBB when you're done "),s()())}function Kt(t,e){if(t&1){let i=N();l(0,"div",0),p(1," Speech recognition "),I(2,"tui-icon",1),l(3,"p"),Re(4),w(5,"async"),k(6,Yt,2,0)(7,Xt,1,0),s()(),l(8,"tui-textfield",2),w(9,"tuiStringify"),l(10,"label",3),p(11,"Voice"),s(),l(12,"input",4),le("ngModelChange",function(n){x(i);let a=d();return se(a.voice,n)||(a.voice=n),T(n)}),s(),b(13,Zt,4,2,"tui-data-list",5),s(),l(14,"tui-textfield",6)(15,"label",3),p(16,"Text"),s(),l(17,"textarea",7),w(18,"waUtterance"),le("ngModelChange",function(n){x(i);let a=d();return se(a.text,n)||(a.text=n),T(n)}),_("waTextToSpeechEnd",function(){x(i);let n=d();return T(n.onEnd())}),s()(),l(19,"div",8)(20,"button",9),_("click",function(){x(i);let n=d();return T(n.onClick())}),p(21),s(),p(22," Tip: say \xABShow sidebar\xBB "),s(),b(23,qt,19,0,"tui-drawer",10),w(24,"async")}if(t&2){let i=d();c(4);let o=He(D(5,8,i.record$));c(2),M(o?6:7),c(2),S("stringify",D(9,11,"name")),c(4),ae("ngModel",i.voice),c(5),S("waTextToSpeech",Be(18,13,i.text,V(18,$t,i.voice)))("waTextToSpeechPaused",i.paused),ae("ngModel",i.text),c(4),W(" ",i.paused?"Play":"Pause"," "),c(2),S("tuiPopup",D(24,16,i.open$)||!1)}}var me=class t{recognition$=r(X);result$=this.recognition$.pipe(_e(),Z(),Te());platformId=r(we);voices$=r(Et);isBrowser=Ve(this.platformId);paused=!0;voice=null;text="Hit play/pause to speak this text";record$=this.result$.pipe(bt("OK Angular"),wt("Thank you Angular"),Z(),Ct());open$=ge(this.result$.pipe(Q(v("Show sidebar")),m(()=>!0)),this.result$.pipe(Q(v("Hide sidebar")),m(()=>!1)));onClick(){this.paused=!this.paused,this.text=this.paused?`${this.text} `:this.text}onEnd(){console.info("Speech synthesis ended")}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["speech-page"]],decls:1,vars:1,consts:[[1,"recognition"],["tuiTooltip","Say \xABOk, Angular\xBB to start recording and \xABThank you, Angular\xBB to end"],["tuiChevron","",3,"stringify"],["tuiLabel",""],["tuiSelect","",3,"ngModelChange","ngModel"],[4,"tuiDropdown"],[1,"textarea"],["tuiTextarea","",3,"ngModelChange","waTextToSpeechEnd","waTextToSpeech","waTextToSpeechPaused","ngModel"],[1,"buttons"],["tuiButton","","type","button",3,"click"],[4,"tuiPopup"],[1,"transcript",3,"transcript_final"],[1,"transcript"],["new","","tuiOption","","type","button",3,"value"],[1,"sidebar"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/workers","rel","noreferrer","target","_blank",1,"link"],["alt","Worker API logo","height","64","src","assets/logos/workers/logo.svg","width","64",1,"icon"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/canvas","rel","noreferrer","target","_blank",1,"link"],["alt","Worker API logo","height","64","src","assets/logos/canvas/logo.svg","width","64",1,"icon"],["href","https://github.com/taiga-family/ng-web-apis/tree/main/libs/audio","rel","noreferrer","target","_blank",1,"link"],["alt","Worker API logo","height","64","src","assets/logos/audio/logo.svg","width","64",1,"icon"],["href","https://ng-web-apis.github.io/","rel","noreferrer","target","_blank",1,"link"]],template:function(i,o){i&1&&k(0,Kt,25,20),i&2&&M(o.isBrowser?0:-1)},dependencies:[We,Ye,Le,$e,Ge,nt,St,mt,ut,dt,vt,ht,pt,yt,ft,y,ct,Ot,Mt,G,Fe,It,Y],styles:["[_nghost-%COMP%]{display:block;max-inline-size:37.5rem;margin:0 auto}.transcript[_ngcontent-%COMP%]{opacity:.5;color:var(--tui-text-primary)}.transcript_final[_ngcontent-%COMP%]{opacity:1}.form[_ngcontent-%COMP%]{inline-size:20rem;margin:0 auto}.textarea[_ngcontent-%COMP%]{margin:1rem 0;overflow:visible}.recognition[_ngcontent-%COMP%]{margin:1rem 0;box-shadow:inset 0 0 0 1px #dcdcdc;border-radius:var(--tui-radius);padding:.5rem 1rem;color:var(--tui-text-secondary)}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.sidebar[_ngcontent-%COMP%]{padding:.75rem 1rem}.link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#444;border-radius:.25rem;border:1px solid #dcdcdc;font-size:.875rem;padding:1rem;margin:1rem .625rem;box-sizing:border-box;transition:box-shadow .3s}.link[_ngcontent-%COMP%]:hover{box-shadow:0 .75rem 2.25rem #0003}"],changeDetection:0})};export{me as default};
